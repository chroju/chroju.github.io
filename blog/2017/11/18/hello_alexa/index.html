<!DOCTYPE html>
<html lang="ja">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="the world as code">
<meta name="description" content="Amazon Echo Dotを書いたのでさっそくオリジナルスキルを作ったのだけど、アイディアに乏しいマンなので、「自分が使っているAWSアカウントの請求額を教">

<meta property="og:title" content="AlexaにAWSの請求額を教えてもらう" />
<meta property="og:description" content="Amazon Echo Dotを書いたのでさっそくオリジナルスキルを作ったのだけど、アイディアに乏しいマンなので、「自分が使っているAWSアカウントの請求額を教" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chroju.github.io/blog/2017/11/18/hello_alexa/" />
<meta property="article:published_time" content="2017-11-18T23:23:00&#43;09:00"/>
<meta property="article:modified_time" content="2017-11-18T23:23:00&#43;09:00"/>


<title>


     AlexaにAWSの請求額を教えてもらう &middot; the world as code 

</title>
<link rel="canonical" href="https://chroju.github.io/blog/2017/11/18/hello_alexa/">







<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/darcula.min.css">




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="https://chroju.github.io/css/reset.css?t=2019-02-27%2018%3a52%3a44.695195271%20%2b0900%20JST%20m%3d%2b0.165157041">
    <link rel="stylesheet" href="https://chroju.github.io/css/pygments.css?t=2019-02-27%2018%3a52%3a44.695195271%20%2b0900%20JST%20m%3d%2b0.165157041">
    <link rel="stylesheet" href="https://chroju.github.io/css/main.css?t=2019-02-27%2018%3a52%3a44.695195271%20%2b0900%20JST%20m%3d%2b0.165157041">
    
        <link rel="stylesheet" href="https://chroju.github.io/css/override.css?t=2019-02-27%2018%3a52%3a44.695195271%20%2b0900%20JST%20m%3d%2b0.165157041">
    




<link rel="shortcut icon"

    href="https://chroju.github.io/img/favicon.ico"

>








</head>


<body lang="ja">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                
                <a href="https://chroju.github.io/"><img class="avatar" src="https://chroju.github.io/img/avatar.png" srcset="https://chroju.github.io/img/avatar.png 1x"></a>
            
            <a href="https://chroju.github.io/"><div class="name">the world as code</div></a>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://chroju.github.io/blog/"><span>Archive</span></a></li>
                    
                        <li class="nav-about"><a href="https://chroju.github.io/about/"><span>About</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">

        
            <a href="//github.com/chroju" target="_blank" rel="noopener"><img class="icon" src="https://chroju.github.io/img/github.svg" alt="github" /></a>
        

        
            <a href="//twitter.com/chroju" target="_blank" rel="noopener"><img class="icon" src="https://chroju.github.io/img/twitter.svg" alt="twitter" /></a>
        

        

        

        

        

        
            
        

        

        
            <a href="mailto:chor.chroju@gmail.com"><img class="icon" src="https://chroju.github.io/img/email.svg" alt="email" /></a>
        

        
            <a href="https://chroju.github.io/atom.xml"><img class="icon" src="https://chroju.github.io/img/rss.svg" alt="rss" /></a>
        
        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    AlexaにAWSの請求額を教えてもらう

</div>

                    <div class="initials"><a href="https://chroju.github.io"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Sat Nov 18 2017 23:23:00 JST'>Nov 18, 2017</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>5 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                

<p>Amazon Echo Dotを書いたのでさっそくオリジナルスキルを作ったのだけど、アイディアに乏しいマンなので、「自分が使っているAWSアカウントの請求額を教えてもらう」という、あんまり夢のないスキルが出来上がった。想定される発話の一覧を作っているとき、「請求額を教えて」とか「支払いを確認して」とかいっぱい書いてて、若干つらい気持ちになったのだけど、取りあえず作るのが目的だったのでそこは気にしない。</p>

<p>ライバルであり、先に国内発売していたGoogle Homeは買っていないので、比較はできていないのだけど、Alexaの強みはLambdaを直接叩けることだと思う。API Gatewayを準備してHTTPSのエンドポイントを渡す、とかではなくて、LambdaのARNを指定して直接連携ができるのでとてもシンプル。既知の技術を活かせることもあって、開発の難易度は高くない。面倒なのはデバッグで、声に出して全機能試してみるというのはわりとまどろっこしくてだるい。</p>

<p>チャットボットフレームワークであるAmazon Lexや、音声変換技術であるAmazon Pollyが公開された時点で意図がわかってはいたけど、Alexaの開発にはバックエンドにAWSを存分に使ってくれということなんだろう。Google Homeの強みが、Google Assistantという高機能AIにあるとしたら、Amazonの方の強みは長年培ってきたクラウドサービスノウハウとのシームレスな連携にあるような気がしている。</p>

<h2 id="alexaの開発">Alexaの開発</h2>

<p>Alexa開発はデモをしても音声なので、動画か音声ファイルを貼る必要があるのがちょっとつらい。一応アプリにも会話の記録が残るので、今回はそれを貼ることにする。こんな感じで、サービスごとの請求金額や、請求金額の合計を教えてくれる。</p>

<p><a href="https://gyazo.com/a42658b0b61e3b2b237a8298672a98ce"><img src="https://i.gyazo.com/a42658b0b61e3b2b237a8298672a98ce.png" alt="https://gyazo.com/a42658b0b61e3b2b237a8298672a98ce" width="540"/></a></p>

<p>開発にまつわる技術的な話もしようと思っていたのだけど、Alexa Skill開発入門みたいなことは、書いたら長くなってしまったのでQiitaに投稿しておいた。そちら参照。</p>

<ul>
<li><a href="https://qiita.com/chroju/items/3f30fe424df36e4b4d80">Amazon Echo (Alexa) の開発に必要な概念について - Qiita</a></li>
</ul>

<p>ここにはLambdaのコードとIntent Schemaだけ貼っておく。Lambdaの方はblueprintで用意されている「alexa-skills-kit-color-expert-python」を少しいじっただけなので、そんな大したものではないというのと、Python2.7のままですというのを断っておく。逆に言えば、用意するものはこんなもんだけでAlexaのSkillは作れてしまう。</p>

<script src="https://gist.github.com/chroju/97201c49a888533f3413a081013ea706.js"></script>

<h2 id="like-a-hubot">like a hubot ?</h2>

<p>ところで人間的な応答を返す会話インターフェースとなると、hubotを始めとするチャットボットを彷彿とさせる。hubotの登場後は、単純な雜談や情報連携から、CIとの連携、監視との連携、さらにはbotを使ったdeployなどもチャットで行われるようになった。ではAlexaはどうなのか。開発の現場でも似たように使えるんじゃないか。</p>

<p>Lambdaと連携できるということは、自社のAWSアカウントのAPIを叩かせることもできるわけで、例えば「Alexa, サーバー台数を100台に増やして」みたいな「ボイスオペレーション」も可能ではある。突然Yahoo!砲のような大量のリクエストが来てワタワタとオペレーションしているときに、片手間で呼びかけるだけで操作を肩代わりしてもらえるなら、ちょっと便利かもしれない。</p>

<p>ただ冷静に考えるとやっぱり無理かなという思いがある。ひとつは文字が使えないこと。チャットボットは文字で指示する、要はCLIの派生みたいなものだったので、記号的なidだとか、固有名だとかでも違えず引数として与えることができた。対してAlexaは音声を解釈するので固有名詞や記号的文字列はどうしても苦手であり、「AutoScalingグループのhogefugaを」などと指示しても、たぶん読み取ってはくれない。</p>

<p>もうひとつは権限の問題。強力なオペレーション機能を持ったhubotは、専用のchannelだけに置いたり、特定のユーザーだけに反応するように組むことで、「権限」の制約ができたのだけど、Alexaは声紋認証するわけでもないので、anonymousに命令を受け付ける。なのでさっき書いたような「起動サーバー台数を増やす」機能を持ったAlexaなど、オフィスに置いたら危なっかしくて仕方ない。てわけで、ボイスオーバーオペレーションはちょっとだけ夢見たのだけど、今のとこ無理そうかなという気がしている。小規模ベンチャーとかで限定的に導入したらテンション上がるかもだけど。</p>

<h2 id="alexaブーム来てほしい">Alexaブーム来てほしい</h2>

<p>繰り返しになってしまうけど、開発プラットフォームがAWSという既知の領域に開放されたことは結構大きいと思っていて、ぶっちゃけた話企業によるスキルの公開を待たなくても、巷のAPIと連携する形で必要なものはどんどん作れてしまう（もちろん、企業側とバッティングすれば審査で弾かれるんだろうけど）。スマートスピーカー、いざ使ってみると案外手の届かないことが多くてそのうち使わなくなる、みたいなことを想定したりもしていたのだけど、自分の好きなようにスキルが作れるなら、いくらでも使いようがあるなという気がしている。個人的にはAlexaスキル作成ブームが来ることをちょっと期待したい。お前も書けって話だと思うので、機会があればまた書きたいとも思う。</p>

                <br>
		<p class="back-to-posts"><a href="https://chroju.github.io/blog/">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
            
        </div>
    </div>
</section>





  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>





</body>
</html>

