<!DOCTYPE html>
<html lang="ja">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="the world as code">
<meta name="description" content="先週 HashiCorp のイベント HashiConf &lsquo;18&rsquo; がサンフランシスコで開かれていて、そこで発表された内容をつらつら追っていたのだけど、2つほど気になったのでメモしておこう">

<meta property="og:title" content="HashiCorp が Terraform state 用 remote storage を出すらしい" />
<meta property="og:description" content="先週 HashiCorp のイベント HashiConf &lsquo;18&rsquo; がサンフランシスコで開かれていて、そこで発表された内容をつらつら追っていたのだけど、2つほど気になったのでメモしておこう" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chroju.github.io/blog/2018/10/29/hashiconf_2018/" />
<meta property="article:published_time" content="2018-10-29T20:49:07+09:00" />
<meta property="article:modified_time" content="2018-10-29T20:49:07+09:00" />


<title>


     HashiCorp が Terraform state 用 remote storage を出すらしい &middot; the world as code 

</title>
<link rel="canonical" href="https://chroju.github.io/blog/2018/10/29/hashiconf_2018/">










<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="https://chroju.github.io/css/reset.css?t=2019-11-10%2015%3a58%3a40.713713593%20%2b0900%20JST%20m%3d%2b0.155049594">
    <link rel="stylesheet" href="https://chroju.github.io/css/pygments.css?t=2019-11-10%2015%3a58%3a40.713713593%20%2b0900%20JST%20m%3d%2b0.155049594">
    <link rel="stylesheet" href="https://chroju.github.io/css/main.css?t=2019-11-10%2015%3a58%3a40.713713593%20%2b0900%20JST%20m%3d%2b0.155049594">
    
        <link rel="stylesheet" href="https://chroju.github.io/css/override.css?t=2019-11-10%2015%3a58%3a40.713713593%20%2b0900%20JST%20m%3d%2b0.155049594">
    




<link rel="shortcut icon"

    href="https://chroju.github.io/img/favicon.ico"

>








</head>


<body lang="ja">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                
                <a href="https://chroju.github.io/"><img class="avatar" src="https://chroju.github.io/img/avatar.png" srcset="https://chroju.github.io/img/avatar.png 1x"></a>
            
            <a href="https://chroju.github.io/"><div class="name">the world as code</div></a>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://chroju.github.io/blog/"><span>Archive</span></a></li>
                    
                        <li class="nav-about"><a href="https://chroju.github.io/about/"><span>About</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">
        
            <a href="//github.com/chroju" target="_blank" rel="noopener"><img class="icon" src="https://chroju.github.io/img/github.svg" alt="github" /></a>
        

        

        
            <a href="//twitter.com/chroju" target="_blank" rel="noopener"><img class="icon" src="https://chroju.github.io/img/twitter.svg" alt="twitter" /></a>
        

	

        

        

        

        

        

        

        

        

        
            <a href="mailto:chor.chroju@gmail.com"><img class="icon" src="https://chroju.github.io/img/email.svg" alt="email" /></a>
        

        

        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    HashiCorp が Terraform state 用 remote storage を出すらしい

</div>

                    <div class="initials"><a href="https://chroju.github.io"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Mon Oct 29 2018 20:49:07 JST'>Oct 29, 2018</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>4 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                

<p>先週 HashiCorp のイベント <a href="https://www.hashiconf.com/">HashiConf &lsquo;18&rsquo;</a> がサンフランシスコで開かれていて、そこで発表された内容をつらつら追っていたのだけど、2つほど気になったのでメモしておこうと思う。ちなみに HashiCorp ツールは Terraform をとてもよく使っていて、それ以外だと Vault と Packer を多少使っているぐらいという感じで、ほぼ Terraform のことにしか興味がない状態。</p>

<h2 id="google-cloud-shell-から実行可能になった">Google Cloud Shell から実行可能になった</h2>

<p>可能になった、といっても自分が育てている任意の tf ファイルを持っていってどうこうするというわけではなくて、 HashiCorp が用意している example をボタンポチッとで Google Cloud Shell 内に持っていって、チュートリアル的に実行できるようになったという話。</p>

<p>とりあえず Terraform を試してみるにも、まずインストールして、ドキュメント見ながら tf ファイルを書いて、認証情報持ってきて、そこからようやく実行という感じで手数が多いと言えば多かったのかもしれなくて、それがブラウザからすぐお試し可能になった。すでに Terraform ドキュメントのいくつかにボタンが用意されていて、例えば <a href="https://www.terraform.io/docs/providers/google/r/compute_router.html">google_compute_router</a> に表示されていたりする。これをポチッとすると、 Google Cloud Shell が開いて、そのまま example を実行できる。試してみたけど、確かに最初の一歩を覚えるにはいいかもしれない。</p>

<p><a href="https://gyazo.com/fe7f226c0d8db7ee849b85cce85f02e8"><img src="https://i.gyazo.com/fe7f226c0d8db7ee849b85cce85f02e8.png" alt="Image from Gyazo" width="600"/></a></p>

<h2 id="terraform-state-を保存する場所を-hashicorp-が用意してくれる">Terraform state を保存する場所を HashiCorp が用意してくれる</h2>

<p>表題の件に移るが、 Terraform の state file はクラウド上に単一のものを保存して、実行者間で共有しましょうというのは自明だと思うけど、それをじゃあどこに置くのかというのはユーザーの裁量に任されていた。おそらく Amazon S3 など、管理対象クラウドサービスにあるストレージが選ばれている気がするけれど、これを HashiCorp が無料で用意してくれるらしい。しかも無料。</p>

<blockquote>
<ul>
<li>No limits on users</li>
<li>No limits on workspaces</li>
<li>Encryption provided by HashiCorp Vault</li>
<li>Per-operation locking</li>
</ul>
</blockquote>

<p>ちょっと上手い話すぎませんかねぇとも思うけど、 Docker が Docker Hub を提供しているようなものと考えると頷ける気もする。正直 S3 で事足りている感はあるし、 S3 で実現可能なバージョニングなどの機能が入るのかはわからないけれど、使い勝手によっては検討したい。今年中にベータ版がオープンするそうで、 <a href="https://app.terraform.io/signup">Wishlist</a> への登録受付がすでに始まっているので、興味がある人は登録してみるといいと思う。</p>

<p>関連して、これはすでに Terraform Enterprise で始まっているみたい（使ったこと無いのでよく知らない）けど、 plan や apply のコマンドを手元で実行するのではなく、 remote で実行するための環境を無料でも制限付きで開放するようだ。個人的な懸念として、手元のコンソールで terraform apply を実行するのは面倒に感じることは確かにあって、 tf ファイルが大きくなってくると数十分待たされることも少なくないし、実行結果を残すのが一手間いるし、実行者が複数いる場合には、個々の環境にインストールされている Terraform にバージョン差異が生まれてしまって上手く実行できない、なんてのもあり得る。解決策として CI を使って実行させたりもしているけれど、環境構築の手間はある。それを解決できる、シンプルに Terraform を実行するためだけのサービスがローンチされるのはわりと嬉しい気がする。</p>

<h2 id="tool-から-workflow-へ">Tool から Workflow へ</h2>

<p>HashiConf &lsquo;18 のレポートの中で、 HashiCorp の Tao の中に &ldquo;workflows, not technologies.”というのがあると触れられているけれど、今回の Terraform 周りのリリースはまさにそれで、従来は単に便利な OSS を配っている企業という印象が強かった HashiCorp が、その実行基盤まで用意してくれるようになってきた。クラウドリソースの定義さえ書いてもらえれば、その管理とか実行とかのワークフローはマネージドなサービスに全部任せられますよというのは良い流れだと思うし、 Ansible が GUI の管理ツールである Ansible Tower をプッシュしている流れにも似たものを感じる。自分は CircleCI とか使えば間に合うんじゃないかなと思ったりもするのだが、運用管理に特化したツール、サービスが充実してくると、そのあたりに厳しい大企業など、マスに広がりやすくなるように思う。 Terraform は好きなツールなので、裾野が広がりやすくなる動きは応援したい。</p>

<p>あと Terraform 0.12 と HCL2 もそろそろクルーーー？な感じで期待している。HCL は GitHub Actions でも採用が決まったので、なんか汎用的に使われていく未来もあるかもですね。その他 HashiCorp &lsquo;18 の情報は以下のブログエントリーなど参照で。</p>

<ul>
<li><a href="https://www.hashicorp.com/blog/hashicorp-product-announcements-at-hashiconf-2018">HashiCorp Product Announcements at HashiConf 2018</a></li>
<li><a href="https://www.hashicorp.com/blog/terraform-collaboration-for-everyone">Terraform Collaboration for Everyone</a></li>
<li><a href="https://www.hashicorp.com/blog/kickstart-terraform-on-gcp-with-google-cloud-shell">Kickstart Terraform on GCP with Google Cloud Shell</a></li>
</ul>

                <br>
                
                <p class="back-to-posts"><a href="https://chroju.github.io/blog">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
            
        </div>
    </div>
</section>









</body>
</html>

