
<!DOCTYPE html>
<html lang="ja">
<head>

  
  <meta charset="UTF-8">
  <title>
    Ruby基礎復習(2) Stringクラス | the world as code
  </title>


  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">

  
  <link rel="canonical" href="http://chroju.github.io/blog/2015/03/15/study-ruby-string/"/>

  
  <link rel="stylesheet" href="http://chroju.github.io/css/sanitize.css">
  <link rel="stylesheet" href="http://chroju.github.io/css/responsive.css">
  <link rel="stylesheet" href="http://chroju.github.io/css/highlight_monokai.css">
  <link rel="stylesheet" href="http://chroju.github.io/css/theme.css">
  <link rel="stylesheet" href="http://chroju.github.io/css/custom.css">
  
  
  <link href="http://chroju.github.io/index.xml" rel="alternate" type="application/rss+xml" title="the world as code" />
  <link href="http://chroju.github.io/index.xml" rel="feed" type="application/rss+xml" title="the world as code" />

  
  <script type="text/javascript">var switchTo5x=true;</script>
  <script type="text/javascript" src="https://ws.sharethis.com/button/buttons.js"></script>
  <script type="text/javascript">stLight.options({publisher: "2b9fffc6-b3fe-4988-a0ef-4f9dcce98eaa", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script>


</head>



<body>
<div class="container">

  
  <header role="banner">
    <div class="row gutters">
      <div id="site-title" class="col span_6">
        <h1><a href="http://chroju.github.io/">the world as code</a></h1>
        
      </div>
      <div id="social" class="col span_6">
        <ul>
          <li><a href="https://twitter.com/chroju" target="_blank">Twitter</a></li>
          
          <li><a href="https://github.com/chroju" target="_blank">GitHub</a></li>
          
        </ul>
      </div>
    </div>
  </header>


  
  <main id="single" role="main">
    <div class="article-header">
      <h1>Ruby基礎復習(2) Stringクラス</h1>
      <div class="meta">
        Mar 15, 2015 &nbsp;
        
      </div>
    </div>
    <article>
      <p>パーフェクトRuby p.148から学習。文字列ことStringクラス。</p>

<p>まずは基本操作系。</p>

<pre><code class="language-ruby">s = &quot;hoge&quot;
s.empty? # =&gt; false
s.length # =&gt; 4
s.size # =&gt; 4
s.bitesize # =&gt; 8
s.include?(&quot;og&quot;) =&gt; true
</code></pre>

<p>演算子での操作。</p>

<pre><code class="language-ruby">'hoge' + 'fuga' # =&gt; 'hogefuga'
'hoge' * 3 =&gt; 'hogehogehoge'
</code></pre>

<p>破壊的な文字列の追加。</p>

<pre><code class="language-ruby">s = &quot;hoge&quot;
s &lt;&lt; &quot;fuga&quot; # =&gt; &quot;hogefuga&quot;
s.concat(&quot;piyo&quot;) # =&gt; &quot;hogefugapiyo&quot;
</code></pre>

<p>切り出し。</p>

<pre><code class="language-ruby">s = &quot;hogefuga&quot;
s.slice(3) # =&gt; &quot;e&quot;
s.slice(2,5) # =&gt; &quot;gefu&quot;
s.slice(-4,2) # =&gt; &quot;fu&quot;
s.slice(2..5) # =&gt; &quot;gefu&quot;
</code></pre>

<p><code>#slice</code>を使わず、以下記法でも同等。</p>

<pre><code class="language-ruby">s = &quot;hogefuga&quot;
s[3] # =&gt; &quot;e&quot;
s[2,5] # =&gt; &quot;gefu&quot;
s[-4,2] # =&gt; &quot;fu&quot;
s[2..5] # =&gt; &quot;gefu&quot;
s[//]
</code></pre>

<p>文字列の整形に関するメソッドいろいろ。特に<code>#chop</code>と<code>#chomp</code>とか紛らわしいとよく言われる。英単語の意味するところとしてchop＝刻むってことで1文字削除されるのはわかるが、そこにmが足されると改行コードの削除になるのはなぜなんだろう。。。あと<code>#squeeze</code>なんかは使う場面がいまいち想像できない。</p>

<p>なお、ここにあるメソッドはすべて非破壊的。末尾に<code>!</code>を付けることで破壊的操作になる。</p>

<pre><code class="language-ruby">s = &quot; aaa &quot;
s.strip # =&gt; &quot;aaa&quot;
s.rstrip # =&gt; &quot; aaa&quot;
s.lstrip # =&gt; &quot;aaa &quot;

s = &quot;aaa\n\n&quot;
s.chomp # =&gt; &quot;aaa\n&quot;
s = &quot;abcd&quot;
s.chop # =&gt; &quot;abc&quot;

s = &quot;aaaabbbbcccc&quot;
s.squeeze # =&gt; &quot;abc&quot;
s.squeeze('ab') # =&gt; &quot;abccc&quot;

&quot;ABC&quot;.downcase # =&gt; &quot;abc&quot;
&quot;def&quot;.upcase # =&gt; &quot;DEF&quot;
&quot;Abc&quot;.swapcase # =&gt; &quot;aBC&quot;
&quot;tITle&quot;.capitalize # =&gt; &quot;Title&quot;

&quot;abc&quot;.reverse # =&gt; &quot;cba&quot;
</code></pre>

<p>置換。第一引数で検索を行い、ヒットした箇所を第二引数で置換するか、あるいはブロックに引き渡して操作、という建て付けのよう。<code>#sub</code>だと最初に一致したもののみ、<code>#gsub</code>だとヒットしたすべての箇所が置換される。これも破壊的、非破壊的の2種類あり。</p>

<pre><code class="language-ruby">&quot;aaaa&quot;.sub(&quot;a&quot;,&quot;b&quot;) # =&gt; &quot;baaa&quot;
&quot;24-1-365&quot;.gsub(/[0-9]+/) {|str| str.to_i.succ} # =&gt; 25-2-366
</code></pre>

<p>配列への変換。<code>#split</code>で第一引数に指定した文字をセパレータとした分割が可能。第二引数には分割最大数が指定できる。また1文字ずつ操作したい場合は<code>#each_char</code>が使える。ブロックへの引き渡しも可能。似たところで<code>#each_byte</code>もある。</p>

<pre><code class="language-ruby">str = &quot;Alice, Bob, Charlie&quot;

str.split(&quot;,&quot;) # =&gt; [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Charlie&quot;]
&quot;Alice&quot;.each_char.to_a # =&gt; [&quot;A&quot;,&quot;l&quot;,&quot;i&quot;,&quot;c&quot;,&quot;e&quot;]
</code></pre>

      
      
      <div id="share-this" class="col span_10">
        <span class='st_twitter_large' displayText='Tweet'></span>
        <span class='st_facebook_large' displayText='Facebook'></span>
        <span class='st_googleplus_large' displayText='Google +'></span>
        <span class='st_pocket_large' displayText='Pocket'></span>
        <span class='st_sharethis_large' displayText='ShareThis'></span>
        <span class='st_email_large' displayText='Email'></span>  
      </div>
    </article>
    


<script type="text/javascript">
     
    var disqus_shortname = '';

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

  </main>
  
  <nav class="pagination">
    
      <span class="previous">&larr; <a href="http://chroju.github.io/blog/2015/03/08/study-ruby-grammer/" rel="prev">Ruby基礎復習(1) 基礎文法</a></span>
    
    
      <span class="next"><a href="http://chroju.github.io/blog/2015/03/16/study-ruby-numeric/" rel="next">Ruby基礎復習(3) Numericクラス</a> &rarr;</span>
    
  </nav>


  
  <footer role="contentinfo">
    <div style="text-align:center;">
      
      written by chroju
    </div>
  </footer>


</div>

<script src="http://chroju.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



</body>
</html>

