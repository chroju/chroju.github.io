<!DOCTYPE html>
<html lang="ja">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="the world as code">
<meta name="description" content="パーフェクトRuby p.144より。 判定系メソッド、#nonzeroが#zeroの真逆の動きではなくてちょっと混乱しそう。あと#intege">

<meta property="og:title" content="Ruby基礎復習(3) Numericクラス" />
<meta property="og:description" content="パーフェクトRuby p.144より。 判定系メソッド、#nonzeroが#zeroの真逆の動きではなくてちょっと混乱しそう。あと#intege" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chroju.github.io/blog/2015/03/16/study-ruby-numeric/" />
<meta property="article:published_time" content="2015-03-16T00:00:00+09:00" />
<meta property="article:modified_time" content="2015-03-16T00:00:00+09:00" />


<title>


     Ruby基礎復習(3) Numericクラス &middot; the world as code 

</title>
<link rel="canonical" href="https://chroju.github.io/blog/2015/03/16/study-ruby-numeric/">










<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="https://chroju.github.io/css/reset.css?t=2020-03-01%2014%3a16%3a38.679396762%20%2b0000%20UTC%20m%3d%2b0.288502646">
    <link rel="stylesheet" href="https://chroju.github.io/css/pygments.css?t=2020-03-01%2014%3a16%3a38.679396762%20%2b0000%20UTC%20m%3d%2b0.288502646">
    <link rel="stylesheet" href="https://chroju.github.io/css/main.css?t=2020-03-01%2014%3a16%3a38.679396762%20%2b0000%20UTC%20m%3d%2b0.288502646">
    
        <link rel="stylesheet" href="https://chroju.github.io/css/override.css?t=2020-03-01%2014%3a16%3a38.679396762%20%2b0000%20UTC%20m%3d%2b0.288502646">
    




<link rel="shortcut icon"

    href="https://chroju.github.io/img/favicon.ico"

>








</head>


<body lang="ja">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                
                <a href="https://chroju.github.io/"><img class="avatar" src="https://chroju.github.io/img/avatar.png" srcset="https://chroju.github.io/img/avatar.png 1x"></a>
            
            <a href="https://chroju.github.io/"><div class="name">the world as code</div></a>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://chroju.github.io/blog/"><span>Archive</span></a></li>
                    
                        <li class="nav-about"><a href="https://chroju.github.io/about/"><span>About</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">
        
            <a href="//github.com/chroju" target="_blank" rel="noopener"><img class="icon" src="https://chroju.github.io/img/github.svg" alt="github" /></a>
        

        

        
            <a href="//twitter.com/chroju" target="_blank" rel="noopener"><img class="icon" src="https://chroju.github.io/img/twitter.svg" alt="twitter" /></a>
        

	

        

        

        

        

        

        

        

        

        
            <a href="mailto:chor.chroju@gmail.com"><img class="icon" src="https://chroju.github.io/img/email.svg" alt="email" /></a>
        

        

        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    Ruby基礎復習(3) Numericクラス

</div>

                    <div class="initials"><a href="https://chroju.github.io"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Mon Mar 16 2015 00:00:00 JST'>Mar 16, 2015</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>2 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                <p>パーフェクトRuby p.144より。</p>
<p>判定系メソッド、<code>#nonzero</code>が<code>#zero</code>の真逆の動きではなくてちょっと混乱しそう。あと<code>#integer?</code>はあるけど<code>#float?</code>はないとか。</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#2aa198">0</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>zero? <span style="color:#586e75"># =&gt; true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span><span style="color:#2aa198">3</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>zero? <span style="color:#586e75"># =&gt; false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span><span style="color:#2aa198">0</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>nonzero? <span style="color:#586e75"># =&gt; nil</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span><span style="color:#2aa198">1</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>nonzero? <span style="color:#586e75"># =&gt; 1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span><span style="color:#2aa198">1</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>integer? <span style="color:#586e75"># =&gt; true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span><span style="color:#2aa198">1</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>real? <span style="color:#586e75"># =&gt; true</span>
</code></pre></div><p>演算子系の話は割愛するが、宇宙船演算子だけ注意しとく。右辺（引数）の方が大きければ負。左辺（レシーバ）が大きければ正。<code>#sort</code>ではブロック内の戻り値が負の場合は2要素をそのまま、正の場合は逆順にして返してくる。宇宙船演算子を利用して昇順or降順に並べ替えることができる。</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#2aa198">1</span> <span style="color:#719e07"></span><span style="color:#719e07">&lt;</span><span style="color:#719e07">=</span><span style="color:#719e07">&gt;</span> <span style="color:#2aa198">2</span> <span style="color:#719e07"></span><span style="color:#586e75"># =&gt; -1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span><span style="color:#2aa198">2</span> <span style="color:#719e07"></span><span style="color:#719e07">&lt;</span><span style="color:#719e07">=</span><span style="color:#719e07">&gt;</span> <span style="color:#2aa198">1</span> <span style="color:#719e07"></span><span style="color:#586e75"># =&gt; 1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span><span style="color:#2aa198">1</span> <span style="color:#719e07"></span><span style="color:#719e07">&lt;</span><span style="color:#719e07">=</span><span style="color:#719e07">&gt;</span> <span style="color:#2aa198">1</span> <span style="color:#719e07"></span><span style="color:#586e75"># =&gt; 0</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span><span style="color:#2aa198">%w(</span><span style="color:#2aa198">aaaa aa aaa</span><span style="color:#2aa198">)</span><span style="color:#719e07">.</span>sort { <span style="color:#719e07">|</span>a,b<span style="color:#719e07">|</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span>  a<span style="color:#719e07">.</span>length <span style="color:#719e07">&lt;</span><span style="color:#719e07">=</span><span style="color:#719e07">&gt;</span> b<span style="color:#719e07">.</span>length
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span>} <span style="color:#586e75"># =&gt; [&#34;aa&#34;, &#34;aaa&#34;, &#34;aaaa&#34;]</span>
</code></pre></div><p>丸め。<code>#round</code>が四捨五入。<code>#ceil</code>で切り上げ。<code>#floor</code>で切り捨て。馴染みのない英単語で覚えにくい。</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#2aa198">1</span><span style="color:#719e07"></span><span style="color:#719e07">.</span><span style="color:#2aa198">4</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>round <span style="color:#586e75"># =&gt; 1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span><span style="color:#2aa198">1</span><span style="color:#719e07"></span><span style="color:#719e07">.</span><span style="color:#2aa198">4</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>ceil <span style="color:#586e75"># =&gt; 2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span><span style="color:#2aa198">1</span><span style="color:#719e07"></span><span style="color:#719e07">.</span><span style="color:#2aa198">4</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>floor <span style="color:#586e75"># =&gt; 1</span>
</code></pre></div><p><code>#step</code>で、第一引数に与えられた上限数値に達するまで、レシーバに第二引数の数値を足し合わせていく繰り返し処理がつくれる。第二引数のデフォルトは1。整数であれば<code>#upto</code>と<code>#downto</code>で1ずつ加算、減算させていくことも可能。</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#2aa198">2</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>step <span style="color:#2aa198">4</span> <span style="color:#719e07"></span><span style="color:#719e07">do</span> <span style="color:#719e07">|</span>i<span style="color:#719e07">|</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  <span style="color:#b58900">puts</span> i
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span><span style="color:#719e07">end</span> <span style="color:#586e75"># &#34;2&#34;,&#34;3&#34;,&#34;4&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span><span style="color:#2aa198">2</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>step <span style="color:#2aa198">3</span><span style="color:#719e07"></span>, <span style="color:#2aa198">0</span><span style="color:#719e07"></span><span style="color:#719e07">.</span><span style="color:#2aa198">3</span> <span style="color:#719e07"></span><span style="color:#719e07">do</span> <span style="color:#719e07">|</span>num<span style="color:#719e07">|</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>  <span style="color:#b58900">puts</span> num
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span><span style="color:#719e07">end</span> <span style="color:#586e75"># &#34;2.0&#34;,&#34;2.3&#34;,&#34;2.6&#34;,&#34;2.9&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span><span style="color:#2aa198">2</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>upto <span style="color:#2aa198">5</span> <span style="color:#719e07"></span><span style="color:#719e07">do</span> <span style="color:#719e07">|</span>i<span style="color:#719e07">|</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>  <span style="color:#b58900">puts</span> i
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span><span style="color:#719e07">end</span> <span style="color:#586e75"># 2,3,4,5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span><span style="color:#2aa198">4</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>downto <span style="color:#2aa198">2</span> <span style="color:#719e07"></span><span style="color:#719e07">do</span> <span style="color:#719e07">|</span>i<span style="color:#719e07">|</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>  <span style="color:#b58900">puts</span> i
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span><span style="color:#719e07">end</span> <span style="color:#586e75"># 4,3,2</span>
</code></pre></div><h2 id="heading">整数</h2>
<p>Integerクラスは絶対値の大きさによりFixnumサブクラスとBignumサブクラスに振り分けられる。メモリ領域との関係で境界が定められるみたいだが、自動判定されるのであまり気にしなくても良い気がする。整数ならではのメソッドは以下のあたり。oddとevenは「オッドアイ」の意味を考えると連想できることに気付いた。</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#2aa198">1</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>odd? <span style="color:#586e75"># =&gt; true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span><span style="color:#2aa198">1</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>even? <span style="color:#586e75"># =&gt; false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span><span style="color:#2aa198">1</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>next <span style="color:#586e75"># =&gt; 2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span><span style="color:#2aa198">2</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>succ <span style="color:#586e75"># =&gt; 3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span><span style="color:#2aa198">3</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>pred <span style="color:#586e75"># =&gt; 2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span><span style="color:#2aa198">56</span><span style="color:#719e07"></span><span style="color:#719e07">.</span>chr <span style="color:#586e75"># =&gt; &#34;8&#34; 文字コードで対応する文字列を返す</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span><span style="color:#2aa198">&#34;</span><span style="color:#2aa198">123</span><span style="color:#2aa198">&#34;</span><span style="color:#719e07">.</span>to_i <span style="color:#586e75"># =&gt; 123</span>
</code></pre></div><h2 id="heading-1">浮動小数点数</h2>
<p>Floatクラス。あまり意識せずに使っても勝手にFloatクラス扱いしてくれたりするので楽。</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span>num <span style="color:#719e07">=</span> <span style="color:#2aa198">2</span><span style="color:#719e07"></span><span style="color:#719e07">.</span><span style="color:#2aa198">0</span> <span style="color:#719e07">/</span> <span style="color:#2aa198">2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span><span style="color:#719e07"></span>num<span style="color:#719e07">.</span>class <span style="color:#586e75"># =&gt; Float</span>
</code></pre></div><h2 id="heading-2">有理数無理数</h2>
<p>Rationalが有理数クラスなわけだが、プログラミングにおいて無理数有理数の別が必要になる場面が想定できない数学オンチなのでよくわからん。Ruby Silverにも出なかった気がするし割愛でいっかな。。。なお複素数は文字通りComplexクラス。</p>

                <br>
                
                <p class="back-to-posts"><a href="https://chroju.github.io/blog">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
            
        </div>
    </div>
</section>









</body>
</html>

